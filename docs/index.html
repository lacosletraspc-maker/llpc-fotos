<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cat√°logo LLPC ‚Äî Temas</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
</head>
<body class="bg-gray-50 text-gray-800">
  <header class="text-center py-6">
    <h1 class="text-3xl font-bold text-emerald-700">üå∏ Cat√°logo La√ßos &amp; Letras Papelaria Criativa</h1>
    <p class="mt-2 text-sm text-gray-600">
      Escolha um tema para ver os detalhes e falar com a Lale pelo WhatsApp.
    </p>
  </header>

  <main class="max-w-6xl mx-auto px-4 pb-10">
    <section id="lista-temas" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
      <p class="col-span-full text-center text-gray-500">Carregando temas‚Ä¶</p>
    </section>
  </main>

  <script>
    (async function carregarTemas() {
      var container = document.getElementById('lista-temas');
      try {
        var res = await fetch('catalogo/index.json');
        if (!res.ok) throw new Error('HTTP ' + res.status);
        var dados = await res.json();

        if (!Array.isArray(dados) || !dados.length) {
          container.innerHTML = '<p class="col-span-full text-center text-gray-500">Nenhum tema publicado ainda.</p>';
          return;
        }

        container.innerHTML = dados.map(function(item){
          var slug  = item.slug || '';
          var total = item.total != null ? item.total : '';
          var foto  = item.thumb || '';
          var tema  = item.tema || '';

          var linkTema = 'lp-tema.html?slug=' + encodeURIComponent(slug);

          return '' +
            '<article class="bg-white shadow rounded-lg overflow-hidden flex flex-col">' +
              (foto ? '<img src="' + foto + '" alt="' + tema.replace(/"/g,'&quot;') + '" class="w-full h-48 object-cover">' : '') +
              '<div class="p-4 flex flex-col flex-1 gap-2">' +
                '<h2 class="font-semibold text-lg text-emerald-700">' + tema + '</h2>' +
                (total !== '' ? '<p class="text-sm text-gray-600">' + total + ' fotos no cat√°logo</p>' : '') +
                '<div class="mt-auto pt-2">' +
                  '<a href="' + linkTema + '" class="inline-flex items-center justify-center px-3 py-1.5 rounded-md bg-emerald-600 text-white text-sm font-medium hover:bg-emerald-700">' +
                    'Ver detalhes ‚ú®' +
                  '</a>' +
                '</div>' +
              '</div>' +
            '</article>';
        }).join('');
      } catch (e) {
        console.error(e);
        container.innerHTML =
          '<p class="col-span-full text-center text-red-600 text-sm">Erro ao carregar o cat√°logo. Tente novamente em alguns instantes.</p>';
      }
    })();
  </script>
</body>
</html>