<!doctype html>
<html lang="pt-br"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>LLPC • Tema</title><link rel="stylesheet" href="style.css"></head>
<body><main class="container">
<a class="back" href="./">← Temas</a><h1 id="titulo">LLPC • Tema</h1><section id="cards" class="grid-cards"></section>
<footer class="footer">LLPC • Laços & Letras Papelaria Criativa</footer></main>
<script>(function(){const qs=new URLSearchParams(location.search);const tema=qs.get('tema')||'';const slug=(s)=> (s||'').normalize('NFD').replace(/\p{Diacritic}/gu,'').toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,'');
document.getElementById('titulo').textContent = tema||'Tema';
function fmt(x){const n=Number(String(x).replace(/[^0-9.,]/g,'').replace(',','.'));return isNaN(n)?String(x):n.toLocaleString('pt-BR',{style:'currency',currency:'BRL'});}
function mkCarousel(imgs){const id='c'+Math.random().toString(36).slice(2);const w=document.createElement('div');w.className='carousel';w.innerHTML='<button class="nav left">‹</button><div class="track" id="'+id+'"></div><button class="nav right">›</button>';const tr=w.querySelector('#'+id);
  imgs.forEach(u=>{const f=document.createElement('figure');f.className='slide';f.innerHTML='<img loading="lazy" src="'+u+'">';tr.appendChild(f);});
  w.querySelector('.nav.left').onclick = ()=> tr.scrollBy({left:-tr.clientWidth,behavior:'smooth'});
  w.querySelector('.nav.right').onclick= ()=> tr.scrollBy({left: tr.clientWidth,behavior:'smooth'}); return w;}
async function load(){try{
  const temaRes=await fetch('catalogo/'+slug(tema)+'.json?ts='+Date.now()); const obj=await temaRes.json();
  const cards=Array.isArray(obj.cards)?obj.cards:[]; const wrap=document.getElementById('cards');
  for(const c of cards){const el=document.createElement('article');el.className='card';
    const imgs=Array.isArray(c.imagens)?c.imagens:[]; const de=c.preco_de||''; const por=c.preco_por||'';
    const head=document.createElement('div');head.className='card-head'; head.innerHTML='<h3>'+c.titulo+' — '+(c.linha||'')+' | LLPC</h3>' + ((de&&por)?('<div class="precos"><span class="de">de '+fmt(de)+'</span><span class="por">'+fmt(por)+'</span></div>'):'<div class="precos"><span class="por">Preço sob consulta</span></div>');
    el.appendChild(head); if(imgs.length) el.appendChild(mkCarousel(imgs));
    const act=document.createElement('div');act.className='actions'; act.innerHTML='<a class="btn wa" target="_blank" rel="noopener" href="https://wa.me/55?text='+encodeURIComponent('Olá! Gostei do item: '+c.titulo+' — Tema: '+tema)+'">Pedir no WhatsApp</a>';
    el.appendChild(act); wrap.appendChild(el);} }catch(e){document.getElementById('cards').innerHTML='<div class="msg-erro">Erro ao carregar dados.</div>';console.error(e);} } load();})();</script>
</body></html>