<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LLPC ‚Äî Detalhes do Tema</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
</head>
<body class="bg-gray-50 text-gray-800">
  <header class="text-center py-6">
    <h1 class="text-3xl font-bold text-emerald-700">üå∏ La√ßos &amp; Letras Papelaria Criativa</h1>
    <p class="mt-2 text-sm text-gray-600">
      Detalhes do tema escolhido.
    </p>
  </header>

  <main class="max-w-3xl mx-auto px-4 pb-10">
    <section id="detalhe-tema" class="bg-white shadow rounded-lg overflow-hidden">
      <div class="p-6 text-center text-gray-500">Carregando tema‚Ä¶</div>
    </section>
  </main>

  <script>
    (function() {
      var container = document.getElementById('detalhe-tema');

      function getSlug() {
        var params = new URLSearchParams(window.location.search);
        return params.get('slug');
      }

      var slug = getSlug();
      if (!slug) {
        container.innerHTML = '<div class="p-6 text-center text-red-600">Link inv√°lido: nenhum tema informado.</div>';
        return;
      }

      (async function carregarTema() {
        try {
          var res = await fetch('catalogo/index.json');
          if (!res.ok) throw new Error('HTTP ' + res.status);
          var dados = await res.json();
          if (!Array.isArray(dados)) throw new Error('JSON inesperado');

          var tema = dados.find(function(t){ return t.slug === slug; });

          if (!tema) {
            container.innerHTML = '<div class="p-6 text-center text-red-600">Tema n√£o encontrado.</div>';
            return;
          }

          var foto  = tema.thumb || '';
          var nome  = tema.tema || '';
          var total = tema.total != null ? tema.total : '';

          var msgWhats = 'Quero o tema ' + nome + ' da La√ßos & Letras Papelaria Criativa.';
          var urlWhats = 'https://wa.me/?text=' + encodeURIComponent(msgWhats);

          container.innerHTML = '' +
            '<div class="flex flex-col md:flex-row">' +
              (foto ? '<div class="md:w-1/2 bg-gray-100"><img src="' + foto + '" alt="' + nome.replace(/"/g,'&quot;') + '" class="w-full h-full object-cover"></div>' : '') +
              '<div class="md:w-1/2 p-6 flex flex-col gap-4">' +
                '<div>' +
                  '<h2 class="text-2xl font-bold text-emerald-700 mb-1">' + nome + '</h2>' +
                  (total !== '' ? '<p class="text-sm text-gray-600">' + total + ' fotos no cat√°logo.</p>' : '') +
                '</div>' +
                '<p class="text-sm text-gray-700">' +
                  'Clique no bot√£o abaixo para falar com a Lale no WhatsApp e montar seu kit personalizado nesse tema.' +
                '</p>' +
                '<div class="mt-auto flex flex-wrap gap-3">' +
                  '<a href="' + urlWhats + '" target="_blank" rel="noopener" class="inline-flex items-center justify-center px-4 py-2 rounded-md bg-emerald-600 text-white text-sm font-semibold hover:bg-emerald-700">' +
                    'üí¨ Falar com a Lale' +
                  '</a>' +
                  '<a href="index.html" class="inline-flex items-center justify-center px-4 py-2 rounded-md border border-gray-300 text-sm text-gray-700 hover:bg-gray-100">' +
                    '‚Üê Voltar para os temas' +
                  '</a>' +
                '</div>' +
              '</div>' +
            '</div>';
        } catch (e) {
          console.error(e);
          container.innerHTML =
            '<div class="p-6 text-center text-red-600 text-sm">Erro ao carregar o tema. Tente novamente em alguns instantes.</div>';
        }
      })();
    })();
  </script>
</body>
</html>