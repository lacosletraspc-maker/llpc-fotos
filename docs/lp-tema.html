<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LLPC ‚Äî Detalhes do Tema</title>
  <meta name="description" content="Veja os detalhes do tema, op√ß√µes de linhas (Essencial, Cl√°ssica, Premium e Luxo), kits e refer√™ncias de valores para montar seu kit de festa com a Lale.">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
</head>
<body class="bg-gray-50 text-gray-800">
  <header class="border-b bg-white/80 backdrop-blur sticky top-0 z-20">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <span class="text-2xl">üå∏</span>
        <div>
          <h1 class="text-xl md:text-2xl font-bold text-emerald-700">La√ßos &amp; Letras Papelaria Criativa</h1>
          <p class="text-xs md:text-sm text-gray-500">Detalhes do tema escolhido.</p>
        </div>
      </div>
      <a href="index.html" class="hidden sm:inline-flex text-xs md:text-sm text-gray-600 hover:text-gray-800">
        ‚Üê Voltar para os temas
      </a>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 pb-12">
    <!-- HERO DIN√ÇMICO -->
    <section id="detalhe-tema" class="mt-8">
      <div class="bg-white shadow rounded-xl p-6 text-center text-gray-500">
        Carregando tema‚Ä¶
      </div>
    </section>

    <!-- LINHAS VISUAIS POR TEMA (fotos dos KIT* por linha) -->
    <section id="linhas-tema-visuais" class="mt-10">
      <h2 class="text-xl md:text-2xl font-semibold text-gray-800 mb-2">
        Veja este tema nas diferentes linhas LLPC
      </h2>
      <p class="text-sm text-gray-600 mb-4">
        Usamos as fotos dos <strong>kits</strong> (Kit Essencial, Kit Cl√°ssico, Kit Premium, Kit Luxo)
        para mostrar, na pr√°tica, como o mesmo tema pode aparecer com n√≠veis diferentes de acabamento. Assim, voc√™
        escolhe a linha que combina com o seu estilo e com o seu or√ßamento.
      </p>
      <div id="linhas-tema-cards" class="grid grid-cols-1 md:grid-cols-2 gap-5">
        <p class="col-span-full text-center text-gray-500 text-sm">Carregando visual das linhas‚Ä¶</p>
      </div>
    </section>

    <!-- PRODUTOS DO TEMA (pre√ßos) -->
    <section class="mt-10">
      <h2 class="text-xl md:text-2xl font-semibold text-gray-800 mb-2">
        Kits e produtos dispon√≠veis neste tema
      </h2>
      <p class="text-sm text-gray-600 mb-4">
        Aqui voc√™ v√™ o que podemos montar neste tema: kits completos, topos de bolo, caixinhas e outros itens.
        Os valores servem como refer√™ncia e podem variar conforme personaliza√ß√µes e quantidade de itens ‚Äî a Lale ajusta tudo
        para caber no seu bolso.
      </p>
      <div id="produtos-tema" class="grid grid-cols-1 md:grid-cols-2 gap-5">
        <p class="col-span-full text-center text-gray-500 text-sm">Carregando produtos‚Ä¶</p>
      </div>
    </section>

    <!-- EXPLICA√á√ÉO DAS LINHAS (texto) -->
    <section class="mt-10 bg-white shadow-sm rounded-xl p-5 md:p-6">
      <h2 class="text-lg md:text-xl font-semibold text-gray-800 mb-3">
        Como funcionam as linhas Essencial, Cl√°ssica, Premium e Luxo
      </h2>
      <p class="text-sm text-gray-600 mb-4">
        Em todos os temas da LLPC voc√™ pode escolher a linha que faz mais sentido para o seu momento.
        Em vez de trocar de fornecedor, voc√™ ajusta apenas o n√≠vel de acabamento: quantidade de camadas, uso de pap√©is especiais,
        brilho, glitter e apliques.
      </p>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-sm">
        <article class="border rounded-lg p-3">
          <h3 class="font-semibold text-emerald-700 mb-1">Essencial</h3>
          <p class="text-gray-600 text-xs md:text-sm">
            Ideal para festas menores ou or√ßamento mais enxuto. Pe√ßas clean, com menos camadas, mas com o tema bem presente nas fotos.
          </p>
        </article>
        <article class="border rounded-lg p-3">
          <h3 class="font-semibold text-emerald-700 mb-1">Cl√°ssica</h3>
          <p class="text-gray-600 text-xs md:text-sm">
            Equil√≠brio entre custo e impacto. Mais detalhes, recortes extras e combina√ß√£o de pap√©is que d√£o volume e movimento.
          </p>
        </article>
        <article class="border rounded-lg p-3">
          <h3 class="font-semibold text-emerald-700 mb-1">Premium</h3>
          <p class="text-gray-600 text-xs md:text-sm">
            Mais camadas 3D, uso de pap√©is especiais e elementos decorativos. Excelente para quem quer uma mesa que se destaque nas fotos.
          </p>
        </article>
        <article class="border rounded-lg p-3">
          <h3 class="font-semibold text-emerald-700 mb-1">Luxo</h3>
          <p class="text-gray-600 text-xs md:text-sm">
            M√°ximo de brilho e detalhes: glitter, la√ßos, acetato e muitos apliques. Perfeita para festas marcantes
            e mesas com clima de ‚Äúuau, que capricho!‚Äù.
          </p>
        </article>
      </div>
    </section>

    <!-- CTA FINAL -->
    <section class="mt-10 text-center">
      <h2 class="text-lg md:text-xl font-semibold text-gray-800 mb-2">
        Vamos montar seu kit neste tema?
      </h2>
      <p class="text-sm text-gray-600 mb-4">
        Clique no bot√£o abaixo, conte como ser√° a festa (data, idade, quantidade de convidados e or√ßamento)
        e a Lale sugere os kits e a linha ideal para voc√™ ‚Äî sem compromisso.
      </p>
      <a id="cta-whats"
         href="https://wa.me/?text=Quero%20montar%20um%20kit%20personalizado%20com%20a%20Lale."
         target="_blank" rel="noopener"
         class="inline-flex items-center justify-center px-4 py-2 rounded-md bg-emerald-600 text-white text-sm md:text-base font-semibold hover:bg-emerald-700">
        üí¨ Falar com a Lale sobre este tema
      </a>
    </section>
  </main>

  <footer class="border-t py-4 text-center text-xs text-gray-500">
    La√ßos &amp; Letras Papelaria Criativa ‚Äî cada detalhe pensado com carinho.
  </footer>

  <script>
    (function() {
      var container = document.getElementById('detalhe-tema');
      var produtosBox = document.getElementById('produtos-tema');
      var ctaWhats = document.getElementById('cta-whats');
      var linhasBox = document.getElementById('linhas-tema-cards');

      function getSlug() {
        var params = new URLSearchParams(window.location.search);
        return params.get('slug');
      }

      var slug = getSlug();
      if (!slug) {
        container.innerHTML = '<div class="bg-white shadow rounded-xl p-6 text-center text-red-600 text-sm">Link inv√°lido: nenhum tema informado.</div>';
        produtosBox.innerHTML = '';
        linhasBox.innerHTML = '';
        return;
      }

      function formatMoney(v) {
        if (typeof v === 'number') {
          try {
            return v.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
          } catch (e) {
            return 'R$ ' + v.toFixed(2).replace('.', ',');
          }
        }
        if (!v) return '';
        return v;
      }

      (async function carregarTemaEProdutos() {
        try {
          // 1) Busca cat√°logo para achar o tema
          var resCat = await fetch('catalogo/index.json');
          if (!resCat.ok) throw new Error('HTTP cat√°logo ' + resCat.status);
          var lista = await resCat.json();
          if (!Array.isArray(lista)) throw new Error('JSON cat√°logo inesperado');

          var temaObj = lista.find(function(t) {
            return (t.slug || '').toString().toLowerCase() === slug.toLowerCase();
          });

          if (!temaObj) {
            container.innerHTML =
              '<div class="bg-white shadow rounded-xl p-6 text-center text-red-600 text-sm">Tema n√£o encontrado.</div>';
            produtosBox.innerHTML = '';
            linhasBox.innerHTML = '';
            return;
          }

          var nome  = temaObj.tema || temaObj.nome || 'Tema personalizado';
          var foto  = temaObj.hero || temaObj.thumb || temaObj.capa || '';
          var total = temaObj.total != null ? temaObj.total : '';
          var nomeLower = nome.toString().toLowerCase();

          // Descri√ß√µes espec√≠ficas para A Bela e a Fera / Hot Wheels
          var heroDesc1 = 'Imagine a mesa da sua festa montada com esse tema, cheia de detalhes em papel que deixam tudo mais acolhedor e fotog√™nico.';
          var heroDesc2 = 'Voc√™ escolhe a linha (Essencial, Cl√°ssica, Premium ou Luxo) e n√≥s adaptamos o kit ao seu or√ßamento, sem perder o encanto.';

          if (nomeLower.indexOf('bela') !== -1 && nomeLower.indexOf('fera') !== -1) {
            heroDesc1 = 'Rosas encantadas, livros, castelo e muito dourado: a vers√£o LLPC de A Bela e a Fera foi pensada para criar uma mesa elegante e acolhedora, do topo de bolo √†s caixinhas de lembrancinha.';
            heroDesc2 = 'Nas quatro linhas (Essencial, Cl√°ssica, Premium e Luxo) voc√™ escolhe se prefere algo mais delicado e econ√¥mico ou um visual de castelo real, com muitas camadas, brilho e detalhes em 3D ‚Äî sempre com op√ß√µes que cabem no seu bolso.';
          } else if (nomeLower.indexOf('hot') !== -1 && nomeLower.indexOf('wheel') !== -1) {
            heroDesc1 = 'Pistas, chamas e carrinhos em alta velocidade: o tema Hot Wheels da LLPC destaca cores vibrantes e elementos 3D para deixar a mesa com cara de corrida.';
            heroDesc2 = 'Voc√™ decide o n√≠vel de impacto: das vers√µes Essencial e Cl√°ssica, mais econ√¥micas, √†s vers√µes Premium e Luxo, com mais camadas, brilho e sensa√ß√£o de movimento ‚Äî sem perder o controle do or√ßamento.';
          }

          var msgWhats = 'Quero montar um kit no tema ' + nome + ' com a Lale da La√ßos & Letras Papelaria Criativa.';
          var urlWhats = 'https://wa.me/?text=' + encodeURIComponent(msgWhats);
          ctaWhats.href = urlWhats;

          container.innerHTML =
            '<div class="bg-white shadow rounded-xl overflow-hidden flex flex-col md:flex-row">' +
              (foto ? '<div class="md:w-1/2 bg-gray-100"><img src="' + foto + '" alt="' + nome.replace(/"/g,'&quot;') + '" class="w-full h-full object-cover"></div>' : '') +
              '<div class="md:w-1/2 p-6 flex flex-col gap-4">' +
                '<div>' +
                  '<h2 class="text-2xl md:text-3xl font-bold text-emerald-700 mb-1">' + nome + '</h2>' +
                  (total !== '' ? '<p class="text-sm text-gray-600">' + total + ' fotos no cat√°logo.</p>' : '') +
                '</div>' +
                '<p class="text-sm text-gray-700 leading-relaxed">' + heroDesc1 + '</p>' +
                '<p class="text-sm text-gray-700 leading-relaxed">' + heroDesc2 + '</p>' +
                '<div class="mt-auto flex flex-wrap gap-3">' +
                  '<a href="' + urlWhats + '" target="_blank" rel="noopener" class="inline-flex items-center justify-center px-4 py-2 rounded-md bg-emerald-600 text-white text-sm font-semibold hover:bg-emerald-700">' +
                    'üí¨ Falar com a Lale sobre este tema' +
                  '</a>' +
                  '<a href="index.html" class="inline-flex items-center justify-center px-4 py-2 rounded-md border border-gray-300 text-xs md:text-sm text-gray-700 hover:bg-gray-100">' +
                    '‚Üê Voltar para os temas' +
                  '</a>' +
                '</div>' +
              '</div>' +
            '</div>';

          // 2) Linhas/fotos por tema (usando KIT* por linha)
          try {
            var resLinhas = await fetch('catalogo/linhas.json');
            if (resLinhas.ok) {
              var linhas = await resLinhas.json();
              if (Array.isArray(linhas)) {
                var linhasTema = linhas.filter(function(l) {
                  var slugLinha = (l.tema_slug || '').toString().toLowerCase();
                  var temaNome = (l.tema || '').toString().toLowerCase();
                  return slugLinha === slug.toLowerCase() || temaNome === nomeLower;
                });

                if (linhasTema.length) {
                  var gruposLinhas = {};
                  linhasTema.forEach(function(l) {
                    var col = l.colecao || 'Linha';
                    var keyCol = col.toString().toLowerCase();
                    if (!gruposLinhas[keyCol]) {
                      gruposLinhas[keyCol] = {
                        colecao: col,
                        foto: l.foto,
                        card: l.card
                      };
                    }
                  });

                  var descLinhas = {
                    'essencial': 'Vers√£o mais econ√¥mica do tema, com menos camadas e acabamento clean, perfeita para festas menores ou quando voc√™ quer concentrar o investimento em outros itens.',
                    'cl√°ssica': 'Equil√≠brio entre pre√ßo e impacto visual: mais recortes, composi√ß√£o de pap√©is e detalhes que d√£o volume sem pesar tanto no or√ßamento.',
                    'classica': 'Equil√≠brio entre pre√ßo e impacto visual: mais recortes, composi√ß√£o de pap√©is e detalhes que d√£o volume sem pesar tanto no or√ßamento.',
                    'premium': 'Mais camadas, uso de pap√©is especiais e elementos em 3D. √ìtima para mesas de destaque e festas principais do ano.',
                    'luxo': 'M√°ximo de camadas, brilho, texturas e apliques. √â a vers√£o de impacto, para quem quer um resultado digno de capa de revista.'
                  };

                  var htmlLinhas = '';
                  Object.keys(gruposLinhas).sort().forEach(function(keyCol) {
                    var info = gruposLinhas[keyCol];
                    var nomeLinha = info.colecao;
                    var desc = descLinhas[keyCol] || descLinhas[nomeLinha.toLowerCase()] || 'Personaliza√ß√£o pensada para esse tema, ajustando camadas e detalhes ao seu or√ßamento.';
                    var textoOrc = 'Quero o tema ' + nome + ' na linha ' + nomeLinha + ' com a Lale da La√ßos & Letras Papelaria Criativa.';
                    var wa = 'https://wa.me/?text=' + encodeURIComponent(textoOrc);

                    htmlLinhas +=
                      '<article class="bg-white border rounded-lg overflow-hidden flex flex-col hover:shadow-sm transition-shadow">' +
                        (info.foto ? '<img src="' + info.foto + '" alt="' + nomeLinha.replace(/"/g,'&quot;') + ' - ' + nome.replace(/"/g,'&quot;') + '" class="w-full h-44 object-cover">' : '') +
                        '<div class="p-3 flex flex-col gap-2 text-sm">' +
                          '<h3 class="font-semibold text-emerald-700 text-sm md:text-base">Linha ' + nomeLinha + '</h3>' +
                          '<p class="text-gray-600 text-xs md:text-sm">' + desc + '</p>' +
                          '<p class="text-[11px] text-gray-500">Adaptamos o tipo de papel, n√∫mero de camadas e apliques para caber no seu bolso.</p>' +
                          '<div class="mt-auto pt-1">' +
                            '<a href="' + wa + '" target="_blank" rel="noopener" class="inline-flex items-center justify-center px-3 py-1.5 rounded-md bg-emerald-600 text-white text-xs font-semibold hover:bg-emerald-700">' +
                              'üí¨ Quero or√ßamento nesta linha' +
                            '</a>' +
                          '</div>' +
                        '</div>' +
                      '</article>';
                  });

                  linhasBox.innerHTML = htmlLinhas;
                } else {
                  linhasBox.innerHTML =
                    '<p class="col-span-full text-center text-gray-500 text-xs">Ainda estamos organizando as fotos por linha para este tema. Fale com a Lale para ver as op√ß√µes de Essencial, Cl√°ssica, Premium e Luxo.</p>';
                }
              }
            } else {
              linhasBox.innerHTML =
                '<p class="col-span-full text-center text-gray-500 text-xs">N√£o foi poss√≠vel carregar as fotos por linha agora. As quatro linhas continuam dispon√≠veis ‚Äî converse com a Lale.</p>';
            }
          } catch (eLinhas) {
            console.error(eLinhas);
            linhasBox.innerHTML =
              '<p class="col-span-full text-center text-gray-500 text-xs">N√£o foi poss√≠vel carregar as fotos por linha agora. As quatro linhas continuam dispon√≠veis ‚Äî converse com a Lale.</p>';
          }

          // 3) Busca pre√ßos (Desejo)
          try {
            var resPrecos = await fetch('precos.json');
            if (!resPrecos.ok) throw new Error('HTTP pre√ßos ' + resPrecos.status);
            var precos = await resPrecos.json();
            if (!Array.isArray(precos)) throw new Error('JSON pre√ßos inesperado');

            var produtosTema = precos.filter(function(p) {
              var temaPreco = (p.tema || '').toString().toLowerCase();
              var slugPreco = (p.slug || p.tema_slug || '').toString().toLowerCase();
              return temaPreco === nomeLower || slugPreco === slug.toLowerCase();
            });

            if (!produtosTema.length) {
              produtosBox.innerHTML =
                '<p class="col-span-full text-center text-gray-500 text-sm">Ainda n√£o temos uma tabela de pre√ßos publicada para este tema. Fale com a Lale para montar um or√ßamento personalizado que caiba no seu bolso.</p>';
              return;
            }

            var grupos = {};
            produtosTema.forEach(function(p) {
              var colecao = p.colecao || 'Linha √∫nica';
              if (!grupos[colecao]) grupos[colecao] = [];
              grupos[colecao].push(p);
            });

            var htmlProdutos = '';
            Object.keys(grupos).sort().forEach(function(colecao) {
              var listaProd = grupos[colecao];
              htmlProdutos +=
                '<article class="col-span-full border rounded-lg bg-white p-4 mb-2">' +
                  '<div class="flex items-center justify-between mb-2 gap-2">' +
                    '<h3 class="font-semibold text-emerald-700 text-sm md:text-base">' +
                      'Linha ' + colecao +
                    '</h3>' +
                    '<span class="text-[11px] md:text-xs text-gray-500 text-right">Valores de refer√™ncia ‚Äî podem variar conforme quantidade e personaliza√ß√£o.</span>' +
                  '</div>' +
                  '<div class="grid grid-cols-1 md:grid-cols-2 gap-3">';

              listaProd.forEach(function(p) {
                var titulo = p.card || p.produto || 'Produto';
                var tipo   = p.tipo || '';
                var precoDe  = p.preco_de;
                var precoPor = p.preco_por;
                var temDesconto = precoDe && precoPor && precoDe !== precoPor;

                htmlProdutos +=
                  '<div class="border rounded-md p-3 flex flex-col gap-2 text-sm">' +
                    '<div>' +
                      '<p class="font-semibold text-gray-800">' + titulo + '</p>' +
                      (tipo ? '<p class="text-xs text-gray-500">' + tipo + '</p>' : '') +
                    '</div>' +
                    '<div class="mt-1">' +
                      (temDesconto
                        ? '<p class="text-xs text-gray-500 line-through">de ' + formatMoney(precoDe) + '</p>' +
                          '<p class="text-base font-semibold text-emerald-700">por ' + formatMoney(precoPor) + '</p>'
                        : '<p class="text-base font-semibold text-emerald-700">' + formatMoney(precoPor || precoDe) + '</p>'
                      ) +
                    '</div>' +
                    '<p class="text-[11px] text-gray-500">Valores para refer√™ncia. Confirme quantidade, dist√¢ncia e personaliza√ß√µes com a Lale.</p>' +
                  '</div>';
              });

              htmlProdutos += '</div></article>';
            });

            produtosBox.innerHTML = htmlProdutos;

          } catch (ePrecos) {
            console.error(ePrecos);
            produtosBox.innerHTML =
              '<p class="col-span-full text-center text-gray-500 text-sm">N√£o foi poss√≠vel carregar os pre√ßos agora. Fale com a Lale para receber um or√ßamento atualizado neste tema.</p>';
          }

        } catch (e) {
          console.error(e);
          container.innerHTML =
            '<div class="bg-white shadow rounded-xl p-6 text-center text-red-600 text-sm">Erro ao carregar o tema. Tente novamente em alguns instantes.</div>';
          produtosBox.innerHTML = '';
          linhasBox.innerHTML = '';
        }
      })();
    })();
  </script>
</body>
</html>