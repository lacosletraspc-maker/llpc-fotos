(function(){async function run(){const grid=document.getElementById('grid');try{const r=await fetch('catalogo/index.json',{cache:'no-store'});if(!r.ok) throw new Error('Sem catalogo/index.json');const arr=await r.json();if(!Array.isArray(arr)||!arr.length){grid.innerHTML='<p class="empty">Ainda não há temas publicados.</p>';return;}for(const it of arr){const slug=it.tema_slug||it.slug||'tema';const titulo=(slug||'').replaceAll('-',' ');const a=document.createElement('a');a.href='lp-tema.html?tema='+encodeURIComponent(slug);a.className='card tema';a.innerHTML='<strong>'+titulo+'</strong>'+(it.count?'<span class="sub">'+it.count+' fotos</span>':'');grid.appendChild(a);}}catch(e){console.error(e);grid.innerHTML='<p class="empty">Erro ao carregar dados.</p>';}}document.readyState!=='loading'?run():document.addEventListener('DOMContentLoaded',run)})();