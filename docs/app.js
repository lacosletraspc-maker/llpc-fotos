(function(){async function run(){const grid=document.getElementById('grid');try{const r=await fetch('catalogo/index.json',{cache:'no-store'});if(!r.ok) throw new Error('Sem catalogo/index.json');const j=await r.json();const temas=(j&&j.temas)||[];if(!Array.isArray(temas)||!temas.length){grid.innerHTML='<p class="empty">Ainda não há temas publicados.</p>';return;}for(const t of temas){const slug=t.slug||t.id;const titulo=t.titulo||t.nome||slug;const a=document.createElement('a');a.href='lp-tema.html?tema='+encodeURIComponent(slug);a.className='card tema';a.innerHTML='<strong>'+titulo+'</strong>'+(t.qtd?'<span class="sub">'+t.qtd+' fotos</span>':'');grid.appendChild(a);}}catch(e){console.error(e);grid.innerHTML='<p class="empty">Erro ao carregar dados.</p>';}}document.readyState!=='loading'?run():document.addEventListener('DOMContentLoaded',run)})();